# Task ID: 5
# Title: Implement Tiered Error Handling and Clarification
# Status: pending
# Dependencies: 4
# Priority: high
# Description: Implement a tiered error handling system in the `/chat` endpoint to gracefully handle AI extraction failures, validation errors, and database operation errors, including prompting the user for clarification when necessary.
# Details:
Enhance the error handling blocks in the `/chat` endpoint. Implement specific error handling for different failure types: AI API errors, AI extraction/parsing errors, validation errors from Task 4, and database errors (e.g., constraint violations). For validation errors or ambiguous requests, formulate a clarifying question to send back to the user via the chat interface. Log detailed error information on the backend.

# Test Strategy:
Simulate various error conditions: AI API down, input causing validation failure (e.g., invalid email format), input causing database error (e.g., duplicate entry). Verify that the system catches the error, provides a user-friendly message in the chat sidebar, and prompts for clarification when the error is due to ambiguous or invalid user input/AI interpretation.
